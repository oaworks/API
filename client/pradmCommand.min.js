P.command=function(d){var l,c,u;return null==(d=null==d?{}:d).api&&(d.api=""),l=[],P.ajax(d.api+"/subroutes",{success:function(e){return l=e}}),P.css("body","height","100%"),P.append("body",'<div id="results"></div><textarea style="border: none; resize: none;" id="command" placeholder=">"></textarea><div id="suggestions"></div>'),P.focus("#command"),u=-1,c=[],P.on("keyup","#command",function(e){var n,t,r,o,s,a,i;if(P.html("#suggestions",""),38===(a=e.keyCode)||40===a)return u+=38===e.keyCode&&0<u?-1:40===e.keyCode&&u<c.length?1:0,P.set("#command",null!=(a=c[u])?a:"");if((t=P.val("#command").replace("\n","")).includes(" = /")&&([o,t]=t.split(" = /"),t="/"+t),13===e.keyCode)return c[c.length-1]!==t&&c.push(t),u=c.length,P.set("#command",""),e=function(e){return o&&null!=e&&(window[o]=e),P.append("#results",'<pre style="color: black; background: transparent; border: none; border-bottom: 1px dotted #ccc;  margin: 0px; padding: 4px;">'+JSON.stringify(e,"",2)+"</pre>"),window.scrollTo(0,document.body.scrollHeight)},"clear"===t?P.html("#results",""):t.startsWith("/")?P.ajax(d.api+t,{success:e}):e(Function("return ("+t+")")());if(t&&t.startsWith("/")){for(t=t.replace("/",""),i=[],r=0,s=l.length;r<s;r++)(n=l[r]).startsWith(t)?i.push(P.append("#suggestions",n+"<br>")):i.push(void 0);return i}})},P.afterLogin=function(){return P.attr("#command","placeholder",P.account.email.split("@")[0].split(".")[0]+" >")};