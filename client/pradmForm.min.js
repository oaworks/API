var indexOf=[].indexOf;P.form=function(e){var s,a,l,t,n,c,p,i,u,r,o,d,f,m,y,b,v,k;for((e=null==e?{}:e).class="PForm",null==e.form&&(e.form="body"),null==e.labels&&(e.labels=!1),e.labels||-1===JSON.stringify(e.fields).indexOf("label")||(e.labels=!0),e.stack=!1,null!=e.stack&&!0!==e.stack||(e.stack="c8"),e.wrapped=!1,null==e.thanks&&(e.thanks="Thanks! Your submission has been received."),"string"==typeof e.thanks&&-1===e.thanks.indexOf("PThanks")&&(e.thanks='<p id="PThanks" style="display:none;">'+e.thanks+"</p>"),e.stack&&(P.append(e.form,'<div id="PStackedForm" class="'+e.stack+'"></div>'),e.form="#PStackedForm"),n=0,u=(f=null!=(d=e.fields)?d:[]).length;n<u;n++){for(l in(t="string"==typeof(t=f[n])?{name:t}:t).id&&!t.name&&(t.name=t.id),t.name&&(o=P.params(t.name))&&(t.values?t.default=o:t.value=o),null==t.classes&&(t.classes=[]),"string"==typeof t.classes&&(t.classes=t.classes.replace(/, /g,",").split(",")),t.class&&("string"!=typeof t.class||t.class.includes(",")?t.classes="string"==typeof t.class?t.class.replace(/, /g,",").split(","):t.class:t.classes.push(t.class),delete t.class),null==t.values||t.type||(t.type="select"),"submit"===t.name.toLowerCase()&&(t.type="submit"),"submit"!==t.type||t.value||(t.value="Submit"),"submit"===t.type?(indexOf.call(t.classes,"button")<0&&t.classes.push("button"),indexOf.call(t.classes,"PSave")<0&&t.classes.push("PSave")):(m=e.class,indexOf.call(t.classes,m)<0&&t.classes.push(e.class)),indexOf.call(t.classes,"stack")<0&&e.stack&&t.classes.push("stack"),e.labels&&null==t.label&&(t.label="submit"!==t.type&&t.name?t.name.substring(0,1).toUpperCase()+t.name.substring(1):""),"string"==typeof t.values&&(t.values=t.values.replace(/, /g,",").split(",")),null==t.values&&(t.values=[]),t.value&&(t.values.push(t.value),delete t.value),"today"!==t.min&&"today"!==t.max||(s=(v=new Date).getDate(),m=v.getMonth()+1,v=v.getFullYear()+"-"+(m<10?"0":"")+m+"-"+(s<10?"0":"")+s,"today"===t.min&&(t.min=v),"today"===t.max&&(t.max=v)),a=t.type?"select"===(b=t.type)||"textarea"===b?"<"+t.type:'<input type="'+t.type+'" ':'<input type="text" ',t.classes&&t.classes.length&&(a+=' class="'+t.classes.join(" ")+'"'),t)"type"!==l&&"values"!==l&&"default"!==l&&"classes"!==l&&"description"!==l&&(a+=" "+l+'="'+t[l]+'"');for("select"!==(b=t.type)&&"textarea"!==b||(a+=">"),c=0,r=(y=t.values).length;c<r;c++){if("string"!=typeof(k=y[c])){for(p in k)i=p;k=k[i]}else i=k;"textarea"===t.type?a+=k:"select"===t.type?a+="<option"+(k!==i?' value="'+k+'"':"")+(k===t.default?" selected":"")+">"+i+"</option>":a+=' value="'+k+'"'}"select"!==(b=t.type)&&"textarea"!==b||(a+="</"+t.type),a+=">",null!=t.label&&"hidden"!==t.type&&(b="<label "+(e.stack?' class="stack"':"")+'for="'+t.name+'">'+t.label,a=b+=e.wrapped?" "+a+"</label>":"</label>"+a),t.description&&(a+="<p>"+t.description+"</p>"),P.append(e.form,a)}if(e.thanks)return P.append(e.form,e.thanks)};